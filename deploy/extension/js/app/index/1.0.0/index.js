define("app/index/1.0.0/index",["gallery/json/1.0.0/json","gallery/jquery/1.0.0/jquery","common/utils/1.0.0/utils","app/components/1.0.0/components","app/modules/1.0.0/modules","common/login/1.0.0/login","common/event/1.0.0/event","common/event_types/1.0.0/event_types"],function(a){var b=a("gallery/json/1.0.0/json"),c=a("gallery/jquery/1.0.0/jquery"),d=a("common/utils/1.0.0/utils"),e=a("app/components/1.0.0/components"),f=a("app/modules/1.0.0/modules"),g=a("common/login/1.0.0/login"),h=a("common/event/1.0.0/event"),i=a("common/event_types/1.0.0/event_types"),j=i("data"),k=i("view"),l=null,m=null,n="browseraddin_360",o="http://vod.xunlei.com/list.html",p=function(){this.init()};if(p.prototype=new h,c.extend(p.prototype,{init:function(){l=new e,this.addEventListeners(),this.ShowMoreHandler("init"),this.loginInits()},addEventListeners:function(){var a=this;l.addEventListener(k.ShowMoreEvent,function(){a.ShowMoreHandler()}),l.addEventListener(k.ViewMyVodListEvent,function(){if(!d.isLogin())return a.loginInits(function(){c("#loginLayer").hide(),c("#myVodListBtn").show()}),c("#loginLayer").fadeIn(200),d.isUA("ie8")&&(c("#loginLayer").css("background","#fff"),c("#myVodListBtn").hide()),!1;try{window.open(o,"_blank")}catch(b){window.open(o,"_blank")}}),l.addEventListener(k.VodAddBtnClickEvent,function(){var b=arguments[2].ids;a.afterLogin(function(){l.listBtnStatus("loading"),f.add2VodList(b)})}),l.addEventListener(k.VodPlayBtnClickEvent,function(){var b=arguments[2].ids,e=0;return!(e=d.isLogin())&&b.length>1?(a.loginInits(function(){c("#loginLayer").hide(),c("#myVodListBtn").show()}),c("#loginLayer").fadeIn(200),d.isUA("ie8")&&(c("#loginLayer").css("background","#fff"),c("#myVodListBtn").hide()),!1):((b.length>1||1==b.length&&e)&&(f.noNeed2Response=1,f.add2VodList(b)),a.playHandler(b[0],1),void 0)}),l.addEventListener(k.SinglePlayEvent,function(){var b=arguments[2].ids,c=0;d.isLogin()&&(f.noNeed2Response=1,f.add2VodList(b),c=1),a.playHandler(b[0],c)}),l.addEventListener(k.SingleAddEvent,function(){var b=arguments[2].ids;a.afterLogin(function(){l.listBtnStatus("loading"),f.add2VodList(b)})}),l.addEventListener(k.VodDownLoadBtnClickEvent,function(){for(var a=arguments[2].ids,b=[],c=0;a.length>c;c++){var d=f.oriResources(a[c]);b.push({cid:"",url:d.url,refer:document.location.href,name:d.name})}console.log("selectedResources",b);var e={};e.resources=b,e.failsCall=function(){console.log("download failed")},e.failsParam=null,f.thunderDown(e)}),l.addEventListener(k.ReSortDataEvent,function(){f.sortDatas(arguments[2].type)}),l.addEventListener(k.SelectEvent,function(){for(var a=!!arguments[2].on,b=arguments[2].indexs,c=0,d=b.length;d>c;c++){var e=f.resources(b[c]),g=e.oindex;e.selected=a,f.setParam(g,"selected",a)}}),a.addEventListener(j.AddListStateChangeEvent,function(){if(f.noNeed2Response)return f.noNeed2Response=0,void 0;var a=arguments[2].param;l.listBtnStatus(a||"");for(var b=arguments[2].urls,c=0;b.length>c;c++){var d=b[c].index,e=b[c].item;l.updateItem(d,e)}}),a.addEventListener(j.DataSortedEvent,function(){a.renderPageHandler()}),a.addEventListener(j.FetchedFileSizeEvent,function(){var b=arguments[2].indexs,c=null,d=f.resources();if(b.length>1)a.renderPageHandler();else for(var e in d){var g=b[0];if(g==d[e].oindex){c=d[e],l.updateItem(g,c);break}}})},renderPageHandler:function(){var a=f.displayListRange(f.EquMark),b=f.leftNum();l.renderPage(a,b)},playHandler:function(a){var c=f.oriResources(a),e=c.url,g="vodplay",h="http://vod.xunlei.com/share.html?from="+n+"&url="+d.encode(e);window.open(h,g)},afterLogin:function(a){var b=this;return d.isLogin()?(a(),void 0):(b.loginInits(function(){c("#loginLayer").hide(),c("#myVodListBtn").show(),a()}),c("#loginLayer").fadeIn(150),d.isUA("ie8")&&(c("#loginLayer").css("background","#fff"),c("#myVodListBtn").hide()),!1)},ShowMoreHandler:function(a){var b=f.displayListRange(a||f.AddMark),c=f.leftNum();l.renderPage(b,c,!!c)},loginInits:function(a){return m?(setTimeout(function(){c("#login_u").focus()},50),m.removeEventListener("onsuccess"),m.success(function(){"function"==typeof a&&a()}),void 0):(m=g,m.init({}),m.error(function(a,b){alert(b),c("#login_p").val("")}),m.valid(function(a){alert(a)}),m.logining(function(){}),m.autoerror(function(){c("#login_u").focus()}),m.success(function(){"function"==typeof a&&a()}),m.logout(function(){}),m.auto(),void 0)}}),location.href.match(/(i.vod.xunlei.com|vod.xunlei.com\/page\/lxrc\/php)/)){var s=window.datas;f.init(s),f.addCtrls(new p)}else location.href.match(/vod.xunlei.com\/page\/extension/)&&c(window).bind("hashchange",function(){var e,a=location.hash.substr(1);try{e=b.parse(a)}catch(g){e=b.parse(d.decode(a))}c(window).unbind("hashchange"),f.init(e),f.addCtrls(new p)});return console.log(location.href),p});