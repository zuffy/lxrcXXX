var lxrcUI=(function(){var f={baseLayerId:"LXRC_baseLayer",message_info:"message_info",mes_close:"mes_close",baseLayerIdCloseId:"LXRC_baseLayerClose",dataStatusTipsWrapId:"LXRC_dataStatusTips",dataWrapId:"LXRC_dataWrap",headButtonsWrapId:"LXRC_headButtons",headOptionsWrapId:"LXRC_headOptions",resourcesListWrapId:"LXRC_resourcesList",resourcesListItemNames:["speedDownloadIco","resourcesIco","resourceName","resourceSize","vodPlay","lixianTask","xlDownload"]};var d="http://vod.xunlei.com/page/lxrc/";var c="?t="+(new Date().getTime());var a={domPrefix:"_XL_Vod",topzIndex:2147483648,loadingHTML:'<div id="_LoaddingTips" style="width:598px;margin:30% 0 0 0;">                        <p style="line-height:24px;text-align:center;padding:40px 0 0;">                        <img src="'+d+'img/loading.gif" alt="" style="vertical-align:-7px;" />正在努力查找视频下载资源...</p>                        <p style="display:none;line-height:24px;text-align:center;padding:40px 0 0;">                        <img src="'+d+'img/face01.gif" alt="" />当前页面没有找到支持云播放的视频下载资源…</p>                     </div>',headerHtml:'<h1 style="padding:13px 0 0 15px;margin:0;z-index:9999992;position:absolute;outline:none;">                        <a href="http://vod.xunlei.com" target="_blank" title="迅雷云播" style="display:block;width:130px;height:27px;background:url('+d+'img/spr_ico.png) 0 0 no-repeat;text-indent:-9999px;z-index:9999992;position:relative;outline:none;" hideFocus="true">迅雷云播</a>                    </h1>                    <a id="dragBar" style="display:block;width:100%;height:45px;cursor:auto;z-index:9999991;position:relative;"></a>                    <a id="panelClose" href="javascript:;" title="关闭" style="font-size:14px;background:url('+d+'img/spr_ico.png) no-repeat;overflow:hidden;                    display:block;position:absolute;top:7px;right:8px;width:87px;height:30px;line-height:30px;text-align:center;color:#424242;background-position:0 -120px;z-index:9999993;outline:none;"  hideFocus="true">关闭</a>',panelStyle:"width:600px;height:502px;position:fixed;right:50px;top:50px;font:12px/1.5 tahoma, \\5B8B\\4F53;box-shadow: 0 0 4px rgba(0, 0, 0, .5);z-index:2147483647;margin:0",css:{contentDivCss:"width:598px;height:502px;border: 1px solid #378fd0;border-top:none;box-shadow:0 0 4px rgba(0,0,0,.5);position:relative;top:-45px;z-index:1",view:"*zoom:1;width:100%;height:502px;",header:"width:600px;height:45px;background:url("+d+"img/ybx_hd.png) no-repeat 0 0;position:relative;font-family:\\5FAE\\8F6F\\96C5\\9ED1;z-index:10",loading_view:"position:absolute;width:597px;height:456px;min-height:353px;background:#fff;top:45px;padding:2;"}};a.innerPage="http://vod.xunlei.com/page/extension/index.html";var e=0;var b={init:function(){var g=this;this.loadExtLayer();return;this.genBasicLayer();this.from=this.shortenStr(document.location.href.replace("#lxrc",""),100);jQuery("#"+f.headOptionsWrapId).find("[name=resourcesFrom]").html(this.from)},loadExtLayer:function(){var u=a,w=this,q="vodExtensionPanel",g=jQuery("#"+q)[0];g!=null&&g.parentNode!=null&&g.parentNode.removeChild(g);var h=this.mkel("div");h.id=q,h.name=q,h.style.cssText=u.panelStyle,h.style.zIndex=a.topzIndex;var m=this.mkel("div",h);m.id="vodExtensionPanel_header",m.name="vodExtensionPanel_header",m.style.cssText=u.css.header;m.innerHTML=u.headerHtml;var p=this.mkel("div",h);p.style.cssText=u.css.contentDivCss,p.id="vodExtensionPanel_Content",p.className="vod-content";var k=this.mkel("div",p);k.id="vodExtensionPanel_view";k.name="vodExtensionPanel_view";k.style.cssText=u.css.view;var j=this.mkel("div",p);j.style.cssText=u.css.loading_view,j.innerHTML=u.loadingHTML,j.style.display="none",j.name="vodExtensionPanel_loadview",j.id="vodExtensionPanel_loadview";window.document.body.appendChild(h);this.wrapper=jQuery(h);this.view=jQuery(k);this.loadingView=jQuery(j);var l=jQuery("#panelClose");var i=window.navigator.userAgent.toLowerCase();var s=new RegExp("MSIE (8)","i");if(s.test(i)){l[0].onmouseenter=function(){jQuery(this).css("background-position","0 -150px")};l[0].onmouseleave=function(){jQuery(this).css("background-position","0 -120px")};l[0].onclick=function(){w.wrapper.hide();return false}}l.hover(function(){jQuery(this).css("background-position","0 -150px")},function(){jQuery(this).css("background-position","0 -120px")}).bind("click",function(){w.wrapper.hide();return false});var v=(document.documentElement.clientHeight-h.offsetHeight)/2;var n=(document.documentElement.clientWidth-h.offsetWidth)/2;v=v>0?v:0;n=n>0?n:0;h.style.top=v+"px";h.style.left=n+"px";Drag.init({handler:jQuery("#dragBar")[0],root:h});var t=jQuery("#dragBar");t.mousedown(function(){jQuery(this).css({height:"402px"})});t.mouseup(function(){jQuery(this).css("height","45px")});t.bind("mousewheel",function(){return false});this.wrapper.bind("mousewheel",function(){return false});w.initFrame();setTimeout(function(){w.loadPage()},10)},mkel:function(k,h){try{var j=document.createElement(k);return h&&h.appendChild(j),j}catch(g){return !1}},initFrame:function(){var k=a,h=this,g='<iframe width="100%" height="100%" border="0" frameborder="0"                                     src="javascript:document.write(\'\');"                                     style="width:100%;height:100%;border:0px"                                      id="'+k.domPrefix+'ContentFrame"                                     name="'+k.domPrefix+'ContentFrame"                                     scrolling ="no"></iframe>';this.view.html(g);this.frm=jQuery("#"+k.domPrefix+"ContentFrame");var i=this.frm[0];var j=function(){jQuery("#vodExtensionPanel_loadview").hide();jQuery("#vodExtensionPanel_header").css("background","");if(!navigator.userAgent.match(/(MSIE|Firefox|chrome)/i)){h.onframeLoaded()}else{jQuery("#_ajaxPostFrom_").remove();h.frm.unbind("load")}};if(i.attachEvent){i.attachEvent("onload",j)}else{i.onload=j}},loadPage:function(i){var i=a.innerPage,g=new Date().getTime(),h=this;this.loadingView.show();i+=c+"#";if(0&&!navigator.userAgent.match(/(MSIE|Firefox|Chrome)/i)){h.frm.attr("src",""+i)}else{h.ajaxPost("http://i.vod.xunlei.com/resource_assistant",{res:lxrcAnalyser.strData()})}},show:function(){this.wrapper&&this.wrapper.show()},onIEframeLoaded:function(){console.log("ie in frameloaded loop..");var j=this;var l=encodeURIComponent(lxrcAnalyser.strData());var g=l.length;var m=10;var k=0;var n=setTimeout(h,200);function h(){if(k<g){var i=l.slice(k,k+m);console.log("sub:"+k+i);j.frm.attr("src",a.innerPage+c+"#"+i);k+=m;setTimeout(h,10)}else{j.frm.attr("src",a.innerPage+c+"#END");clearTimeout(n)}}return},ajaxPost:function(g,i){var j="\n";var k='<form id="_ajaxPostFrom_" method="post" action="'+g+'" target="'+a.domPrefix+'ContentFrame">'+j;for(var h in i){k+='<input type="hidden" name="'+h+'" value="'+encodeURIComponent(i[h])+'" />'+j}k+="</form>"+j;jQuery(document.body).append(k);jQuery("#_ajaxPostFrom_")[0].submit()},onframeLoaded:function(){var g=this;e++;if(e==1){var h=g.encode(lxrcAnalyser.strData());console.log("frameLoaded---"+h.length);g.getFrame().attr("src",a.innerPage+c+"#"+h)}if(e==2){setTimeout(function(){g.getFrame().attr("src",a.innerPage+c+"#")},100)}},getFrame:function(){return this.frm||(this.frm=jQuery("#"+a.domPrefix+"ContentFrame"))}};Drag={obj:null,init:function(h){h.handler.onmousedown=this.start;h.handler.root=h.root||h.handler;var g=h.handler.root;g.onDragStart=h.dragStart||new Function();g.onDrag=h.onDrag||new Function();g.onDragEnd=h.onDragEnd||new Function()},start:function(i){var h=Drag.obj=this;i=i||Drag.fixEvent(window.event);ex=i.pageX;ey=i.pageY;h.lastMouseX=ex;h.lastMouseY=ey;var g=h.root.offsetLeft;var j=h.root.offsetTop;h.root.style.left=g+"px";h.root.style.top=j+"px";document.onmouseup=Drag.end;document.onmousemove=Drag.drag;h.root.onDragStart(g,j)},drag:function(j){j=j||Drag.fixEvent(window.event);ex=j.pageX;ey=j.pageY;var i=Drag.obj.root;var h=i.style.left?parseInt(i.style.left):0;var l=i.style.top?parseInt(i.style.top):0;var g=ex-Drag.obj.lastMouseX+h;var k=ey-Drag.obj.lastMouseY+l;i.style.left=g+"px";i.style.top=k+"px";Drag.obj.root.onDrag(g,k);Drag.obj.lastMouseX=ex;Drag.obj.lastMouseY=ey;j.preventDefault&&j.preventDefault()},end:function(h){var g=Drag.obj.root.style.left?parseInt(Drag.obj.root.style.left):0;var i=Drag.obj.root.style.top?parseInt(Drag.obj.root.style.top):0;Drag.obj.root.onDragEnd(g,i);document.onmousemove=null;document.onmouseup=null;Drag.obj=null},fixEvent:function(g){g.pageX=g.clientX+document.documentElement.scrollLeft;g.pageY=g.clientY+document.documentElement.scrollTop;return g}};return b})();